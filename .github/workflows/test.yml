name: 👨🏻‍🔬 Test actions@nukit

on:
  workflow_dispatch:
  push:
    branches:
      - "nukit"
jobs:
  test:
    runs-on: ubuntu-latest
    name: Nukit simple demo
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: nukit A
        id: A
        # uses: melMass/actions@nukit
        uses: ./
        with:
          script: |
            let root = (git grab https://github.com/AcademySoftwareFoundation/OpenImageIO)
            $nu.os-info | to-github
            {NEXT: "some-data", OIIO_ROOT:$root} | to-github
      - name: nukit B
        id: B
        # uses: melMass/actions@nukit
        uses: ./
        with:
          script: |
            print $env.NEXT
            print $env.kernel_version
            tree $env.OIIO_ROOT

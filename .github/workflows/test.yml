name: üë®üèª‚Äçüî¨ Test actions@nukit

on:
  workflow_dispatch:
  push:
    branches:
      - "nukit"
jobs:
  test:
    runs-on: macos-latest
    name: Nukit simple demo
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: nukit A
        id: A
        # uses: melMass/actions@nukit
        uses: ./
        with:
          script: |
            print $env.opts
            $nu.os-info | to-github
            {NEXT: "some-data" SEMVER:"2.5.6"} | to-github
            {NUKIT_VERSION: "2.1.1" NUKIT_BRANCH: "nightly"} | to-github --output
      - name: nukit B
        id: B
        # uses: melMass/actions@nukit
        uses: ./
        with:
          script: |
            print $env.SEMVER
            print $env.NEXT
            print $env.kernel_version
            print (open $env.GITHUB_OUTPUT)
            xcodebuild -showsdks
            xcode-select --print-path
            fd /Library/Developer/CommandLineTools/SDKs string.h

      - name: Read in bash
        shell: bash
        run: |
          echo "${{steps.A.outputs.NUKIT_BRANCH}}"
          echo ${{env.SEMVER}}
